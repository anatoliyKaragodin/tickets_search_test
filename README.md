# Tickets Search Test

Тестовое приложение по поиску билетов.

**Разработчик:** Анатолий Карагодин (Telegram: [@anatoliy_karagodin](https://t.me/anatoliy_karagodin))

## Техническое задание

[Техническое задание](https://docs.google.com/document/d/12Y_xmJG-B-g51Lhwm69vTf8T00mVImH5AYhZWAEX__Y/edit)

## Макет

[Макет на Figma](https://www.figma.com/design/u59qhHjKOpI2GmKuDRZBf8/Effective-Mobile.-%D0%A2%D0%B5%D1%81%D1%82%D0%BE%D0%B2%D0%BE%D0%B5-%D0%B7%D0%B0%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-%D0%B4%D0%BB%D1%8F-%D1%80%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%87%D0%B8%D0%BA%D0%BE%D0%B2.-%D0%9F%D1%80%D0%BE%D0%B4%D0%B0%D0%B6%D0%B0-%D0%B0%D0%B2%D0%B8%D0%B0%D0%B1%D0%B8%D0%BB%D0%B5%D1%82%D0%BE%D0%B2?node-id=2974-1089&t=JbhTqGr8v7NZHCZW-0)

## Getting Started

Проект построен по [Clean Architecture](https://habr.com/ru/companies/otus/articles/732178/).

## Структура проекта

### Data Layer (Слой данных)

- **datasources/**
  - **remote/** 
    - **Описание:** Отвечает за получение offers, tickets, tickets_offers (см. ТЗ).
    - **Реализация:** Интерфейсы и соответствующие реализации (Dio). В текущих реализациях в случае ошибки получения возвращаются хардкод данные, потому что периодически ссылки не работают.
  - **local/**
    - **Описание:** Отвечает за хранение истории поиска (города отправления).
    - **Реализация:** Интерфейсы и соответствующие реализации. Также хранятся хардкод данные, описанные выше.
    
- **models/**
  - **Описание:** Модели сырых данных и маппер (dart_mappable).

- **repositories/**
  - **Описание:** Реализации интерфейсов репозиториев для связи со слоем domain.

### Domain Layer (Слой домена)

- **di/**
  - **Описание:** Dependency Injection (внедрение зависимостей). Реализация через get_it.

- **entities/**
  - **Описание:** Сущности, с которыми работает приложение, и маппер (dart_mappable).

- **repositories/**
  - **Описание:** Интерфейсы репозиториев, которые реализуются на слое data.

- **use_cases/**
  - **Описание:** Use Cases, через которые слой presentation взаимодействует с domain.

### Presentation Layer (Слой презентации)

- **mapper/**
  - **Описание:** Стейты экранов и маппер (dart_mappable).

- **router/**
  - **Описание:** Роутер приложения (go_router). StatefulShellRoute.indexedStack используется для нижнего меню вкладок главного меню. Данные в конструктор экранов можно передавать через extra (см. AllTicketsScreen и метод onTapShowAllTickets в TicketsSeacrhVM).

- **screens/** 
  - **Описание:** Экраны. Реализация MVVM (https://apptractor.ru/info/articles/chto-takoe-mvvm-arhitektura.html). Управление состоянием реализовано через riverpod.

- **utils/**
  - **Описание:** Различные вспомогательные утилиты, включая стили приложения.

- **widgets/**
  - **Описание:** Общие виджеты и виджеты отдельных экранов. Вынесены виджеты, которые можно переиспользовать, либо виджеты, которые занимают много места. Остальные виджеты вынесены приватными в самих экранах, чтобы не мазолили глаз.

## Команды

*Для перезапуска генерации (dart_mappable) используйте команду в терминале:*
  ./rebuild.bat

*Для запуска интеграционного теста:*
  flutter drive --target=test_driver/app.dart  

## Возможные улучшения

  - Можно добавить комментарии в коде(?)
  - Добавить обработчик ошибок
  - Добавить тестирование
  - Возможно реализовать ещё экраны по макету(дополнительно к ТЗ) 
  - Реализовать выбор даты через вызов нативных дейтпикеров на платформах(?). Начата работа над вызовом нативного дейтпикера андроида(native_calendar/)